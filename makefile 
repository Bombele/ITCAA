# ğŸ“ Makefile institutionnel pour ITCAA

PYTHONPATH=src
TEST_DIR=tests
SCRIPT_DIR=scripts
INDEX_REPORT=src/itcaa_ai_offline/data/index/index_report.md

.PHONY: check test index audit clean

## ğŸ§  VÃ©rifie la structure du projet IA
check:
	@echo "ğŸ” VÃ©rification structure IA ITCAAâ€¦"
	python $(SCRIPT_DIR)/check_structure.py

## ğŸ§ª Lance tous les tests avec pytest
test:
	@echo "ğŸ§ª ExÃ©cution des tests unitaires et d'intÃ©grationâ€¦"
	PYTHONPATH=$(PYTHONPATH) pytest -v $(TEST_DIR)

## ğŸ§¬ Reconstruit l'index FAISS
index:
	@echo "ğŸ§¬ Reconstruction de l'index FAISSâ€¦"
	python src/itcaa_ai_offline/index_builder.py

## ğŸ“Š GÃ©nÃ¨re le rapport d'audit
audit:
	@echo "ğŸ“Š GÃ©nÃ©ration du rapport d'auditâ€¦"
	python src/itcaa_ai_offline/generate_index_report.py
	@echo "âœ… Rapport disponible : $(INDEX_REPORT)"

## ğŸ§¹ Nettoie les artefacts temporaires
clean:
	@echo "ğŸ§¹ Nettoyage des fichiers temporairesâ€¦"
	rm -rf .pytest_cache __pycache__ */__pycache__ *.pyc